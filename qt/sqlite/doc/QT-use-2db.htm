<!DOCTYPE HTML>
<!-- saved from url=(0054)http://blog.csdn.net/gongjin21/article/details/5733296 -->
<!DOCTYPE html PUBLIC "" ""><HTML><HEAD><META content="IE=11.0000" 
http-equiv="X-UA-Compatible">
     <LINK href="http://blog.csdn.net/gongjin21/article/details/5733296" rel="canonical"> 
    
<SCRIPT type="text/javascript">
        var username = "gongjin21";
        var _blogger = username;
        var blog_address = "http://blog.csdn.net/gongjin21";
        var static_host = "http://s.csdnimg.cn/static/";
        var currentUserName = ""; 
        var fileName = '5733296';
        var commentscount = 1;
        var islock = false
        window.quickReplyflag = true;
        var totalFloor = 1;
        var isBole = false;
        var isDigg = false;
        var isExpert=false;
        var isAdm = false;
    </SCRIPT>
     
<META http-equiv="content-type" content="text/html; charset=utf-8">     
<META http-equiv="X-UA-Compatible" content="IE=Edge">     
<META name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
    
<META name="apple-mobile-web-app-status-bar-style" content="black">     
<SCRIPT src="QT-use-2db_files/jquery-1.9.1.min.js" type="text/javascript"></SCRIPT>
     <LINK href="QT-use-2db_files/bootstrap.min.css" rel="stylesheet">     <LINK 
href="QT-use-2db_files/avatar.css" rel="stylesheet">     <LINK href="QT-use-2db_files/main-cd3c75ade4.css" 
rel="stylesheet">     <LINK href="QT-use-2db_files/content_toolbar.css" rel="stylesheet"> 
    
<SCRIPT src="QT-use-2db_files/main.js"></SCRIPT>
     
<SCRIPT src="QT-use-2db_files/tracking_for_recommend.js" type="text/javascript" charset="utf-8"></SCRIPT>
     
<SCRIPT src="QT-use-2db_files/tracking.js" type="text/javascript" charset="utf-8"></SCRIPT>
     
<SCRIPT src="QT-use-2db_files/main-ce2309b47e.js" type="text/javascript"></SCRIPT>
     
<SCRIPT src="QT-use-2db_files/ds.js"></SCRIPT>
     
<SCRIPT type="text/javascript">
        // Traffic Stats of the entire Web site By baidu
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?6bcd52f51e9b3dce32bec4a3997715ac";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
        // Traffic Stats of the entire Web site By baidu end
    </SCRIPT>
     
<META name="description" content='/* 如果要连接多个数据库，必须指定不同的连接名字 */&#10;&#10;&#9;#include "q2.h"&#10;&#10;&#9;#include &#10;&#9;#include &#10;&#9;#include &#10;&#10;&#9;QSqlDatabase *db;&#10;&#9;QSqlDatabase *db2;&#10;&#10;&#10;&#9;q2::q2(QWidget *parent, Qt::WFlags flags)&#10;&#9;&#9;: QMainWindow(parent, flags)&#10;&#9;{&#10;&#9;&#9;ui.setupUi(this);&#10;&#10;&#9;&#9;db = new QSqlDat'> 
    
<META name="keywords" content="数据库,qt">     
<META http-equiv="Cache-Control" content="no-siteapp"><LINK href="#" rel="alternate" 
media="handheld">     
<META name="shenma-site-verification" content="5a59773ab8077d4a62bf469ab966a63b_1497598848"> 
    <TITLE>QT 连接多个数据库，必须指定不同的连接名字 - CSDN博客</TITLE>     <LINK href="http://csdnimg.cn/public/favicon.ico" 
rel="SHORTCUT ICON"> 
<META name="GENERATOR" content="MSHTML 11.00.9600.18739"></HEAD> 
<BODY>
<SCRIPT id="toolbar-tpl-scriptId" src="QT-use-2db_files/content_toolbar.js" type="text/javascript" domain="http://blog.csdn.net/" skin="black" prod="download"></SCRIPT>
 
<DIV class="container clearfix"><main><ARTICLE>
<H1 class="csdn_top">QT 连接多个数据库，必须指定不同的连接名字</H1>
<DIV class="article_bar clearfix">
<DIV class="artical_tag"><SPAN class="original">                原创               
 </SPAN>                 <SPAN class="time">2010年07月14日 09:01:00</SPAN>          
   </DIV>
<UL class="article_tags clearfix csdn-tracking-statistics" 
  data-mod="popu_377"><LI class="tit">标签：</LI><!--          [startarticletags]--> 
                                                              
  <LI><A href="http://so.csdn.net/so/search/s.do?q=数据库&amp;t=blog" target="_blank">数据库</A> 
  <SPAN>/</SPAN></LI>
  <LI><A href="http://so.csdn.net/so/search/s.do?q=qt&amp;t=blog" target="_blank">qt</A> 
  <SPAN>/</SPAN></LI>
  <LI><A href="http://so.csdn.net/so/search/s.do?q=db2&amp;t=blog" target="_blank">db2</A> 
  <SPAN>/</SPAN></LI>
  <LI><A href="http://so.csdn.net/so/search/s.do?q=initialization&amp;t=blog" 
  target="_blank">initialization</A> <SPAN>/</SPAN></LI>
  <LI><A href="http://so.csdn.net/so/search/s.do?q=sql&amp;t=blog" target="_blank">sql</A> 
  <SPAN>/</SPAN></LI>
  <LI><A href="http://so.csdn.net/so/search/s.do?q=database&amp;t=blog" target="_blank">database</A> 
  <SPAN>/</SPAN></LI><!--          [endarticletags]-->             </UL>
<UL class="right_bar">
  <LI><BUTTON class="btn-noborder"><I class="icon iconfont icon-read"></I><SPAN 
  class="txt">3940</SPAN></BUTTON></LI>
  <LI class="edit"><A class="btn-noborder" href="http://blog.csdn.net/gongjin21/article/details/"><I 
  class="icon iconfont icon-bianji"></I><SPAN class="txt">编辑</SPAN>              
         </A>                 </LI>
  <LI class="del"><A class="btn-noborder" onclick="javascript:deleteArticle(fileName);return false;"><I 
  class="icon iconfont icon-shanchu"></I><SPAN class="txt">删除</SPAN>             
          </A>                 </LI></UL></DIV>
<DIV class="article_content csdn-tracking-statistics" id="article_content" 
data-mod="popu_519" data-dsm="post">
<P><TEXTAREA name="code" class="cpp" rows="22" cols="90">/* QT 连接多个数据库，必须指定不同的连接名字 */

	#include "q2.h"

	#include &lt;QSqlDatabase&gt;
	#include &lt;QSqlError&gt;
	#include &lt;QSqlQuery&gt;

	QSqlDatabase *db;
	QSqlDatabase *db2;


	q2::q2(QWidget *parent, Qt::WFlags flags)
		: QMainWindow(parent, flags)
	{
		ui.setupUi(this);

		db = new QSqlDatabase(QSqlDatabase::addDatabase("QMYSQL"));	// 没指定连接名字，则为默认库
		db-&gt;setDatabaseName("sns");
		db-&gt;setHostName("127.0.0.1");
		db-&gt;setPort(3306);
		db-&gt;setUserName("root");
		db-&gt;setPassword("");
		if (! db-&gt;open()) {
			QSqlError e = db-&gt;lastError();
			qFatal("ServerDB db1: Failed initialization: %s",qPrintable(e.text()));
		}

		db2 = new QSqlDatabase(QSqlDatabase::addDatabase("QMYSQL", "db2"));	// 如果要连接多个数据库，必须指定不同的连接名字，否则会覆盖上面的默认连接
		db2-&gt;setDatabaseName("bbs");
		db2-&gt;setHostName("127.0.0.1");
		db2-&gt;setPort(3306);
		db2-&gt;setUserName("root");
		db2-&gt;setPassword("");
		if (! db2-&gt;open()) {
			QSqlError e = db2-&gt;lastError();
			qFatal("ServerDB db1 : Failed initialization: %s",qPrintable(e.text()));
		}
	}

	void q2::on_pushButton_clicked()
	{
		if (db-&gt;isValid())
		{
			QSqlQuery query;	// 查默认库，即 db
		
			if (query.prepare("select * from users"))
			{
				if (query.exec())
				{
					if (query.next())
						ui.pushButton-&gt;setText(query.value(2).toString());
					else
						qWarning("SQL Error [%s]: %s", qPrintable(query.lastQuery()), qPrintable(query.lastError().text()));
				}
				else
				{
					qWarning("SQL Error [%s]: %s", qPrintable(query.lastQuery()), qPrintable(query.lastError().text()));
				}
			}
			else
			{
				qWarning("SQL Error [%s]: %s", qPrintable(query.lastQuery()), qPrintable(query.lastError().text()));
			}
		}
		else
		{
			qWarning("SQL rejected: Database is gone");
		}
	}

	void q2::on_pushButton_2_clicked()
	{
		if (db2-&gt;isValid())
		{
			QSqlQuery query(*db2);	// 查另一个数据库 db2

			if (query.prepare("select * from users"))
			{
				if (query.exec())
				{
					if (query.next())
						ui.pushButton_2-&gt;setText(query.value(2).toString());
					else
						qWarning("SQL Error [%s]: %s", qPrintable(query.lastQuery()), qPrintable(query.lastError().text()));
				}
				else
				{
					qWarning("SQL Error [%s]: %s", qPrintable(query.lastQuery()), qPrintable(query.lastError().text()));
				}
			}
			else
			{
				qWarning("SQL Error [%s]: %s", qPrintable(query.lastQuery()), qPrintable(query.lastError().text()));
			}
		}
		else
		{
			qWarning("SQL rejected: Database is gone");
		}
	}


	q2::~q2()
	{
		db-&gt;close();
		delete db;
		db = NULL;

		db2-&gt;close();
		delete db2;
		db2 = NULL;
	}</TEXTAREA></P></DIV></ARTICLE>
<DIV class="readall_box csdn-tracking-statistics" data-mod="popu_376">
<DIV class="read_more_mask"></DIV><A class="btn btn-large btn-gray-fred read_more_btn" 
target="_self">阅读全文</A>       </DIV>
<DIV class="article_copyright"></DIV>
<UL class="article_collect clearfix csdn-tracking-statistics" data-mod="popu_378">
  <LI class="tit">本文已收录于以下专栏：</LI><!--          [startarticlecolumns]-->         
                          <!--          [endarticlecolumns]-->       </UL>
<DIV class="comment_box clearfix">
<DIV id="comment_form">
<DIV id="commentsbmitarear"></DIV></DIV></DIV>
<DIV class="comment_li_outbox">
<DIV id="comment_list"></DIV></DIV>
<DIV class="more_comment">
<DIV class="trackgin-ad" id="comment_bar" data-mod="popu_385"></DIV></DIV>
<H3 class="recommend_tit">相关文章推荐</H3>
<DIV class="recommend_list clearfix" id="rasss">
<DL class="clearfix csdn-tracking-statistics" data-mod="popu_387" data-dsm="post" 
data-feed-show="false" data-poputype="feed">
  <DD>
  <H2><A href="http://blog.csdn.net/zhanglongtumi/article/details/39496175" 
  target="_blank" strategy="BlogCommendFromBaidu_0">qt中连接两个数据库</A></H2>
  <DIV class="summary">                              在网上找这个资料不好用，自己瞎贴上源代码，       
                     </DIV>
  <UL>
    <LI class="avatar_img"><A href="http://blog.csdn.net/zhanglongtumi" target="_blank" 
    strategy="BlogCommendFromBaidu_0"><IMG title="zhanglongtumi" alt="zhanglongtumi" 
    src="QT-use-2db_files/3_zhanglongtumi.jpg"></A></LI>
    <LI class="user_name"><A 
    href="http://blog.csdn.net/zhanglongtumi">zhanglongtumi</A></LI>
    <LI class="time">2014年09月23日 11:43</LI>
    <LI class="visited_num"><I 
    class="icon iconfont icon-read"></I><SPAN>1104</SPAN></LI></UL></DD></DL>
<DL class="clearfix csdn-tracking-statistics" data-mod="popu_387" data-dsm="post" 
data-feed-show="false" data-poputype="feed">
  <DD>
  <H2><A href="http://blog.csdn.net/abeldeng/article/details/24767245" target="_blank" 
  strategy="BlogCommendFromBaidu_1">qt 打开多个数据库文件</A></H2>
  <DIV class="summary">                              如果用如下方式打开两个数据库，         db 
  = QSqlDatabase::addDatabase(DBType);        db.setDatabaseName(DBfi...         
                   </DIV>
  <UL>
    <LI class="avatar_img"><A href="http://blog.csdn.net/abeldeng" target="_blank" 
    strategy="BlogCommendFromBaidu_1"><IMG title="abeldeng" alt="abeldeng" src=""></A></LI>
    <LI class="user_name"><A 
    href="http://blog.csdn.net/abeldeng">abeldeng</A></LI>
    <LI class="time">2014年04月30日 09:07</LI>
    <LI class="visited_num"><I 
    class="icon iconfont icon-read"></I><SPAN>4061</SPAN></LI></UL></DD></DL>
<SCRIPT>
                      (function() {
                          var s = "_" + Math.random().toString(36).slice(2);
                          document.write('<div id="' + s + '"></div>');
                          (window.slotbydup=window.slotbydup || []).push({
                              id: '4765209',
                              container: s,
                              size: '808,120',
                              display: 'inlay-fix'
                          });
                      })();
                  </SCRIPT>
                                                                 
<DL class="clearfix csdn-tracking-statistics" data-mod="popu_387" data-dsm="post" 
data-feed-show="false" data-poputype="feed">
  <DD>
  <H2><A href="http://blog.csdn.net/yuanzhangmei1/article/details/7709620" 
  target="_blank" 
  strategy="BlogCommendFromBaidu_2">Qt中数据库基本操作--QSqlQuery</A></H2>
  <DIV class="summary">                              
  Qt中对数据库的操作主要通过QSqlQuery实现，QSqlQuery提供了执行数据库语句的方法，在Qt中利用QSqlQuery类实现了执行SQL语句。它可以返回所有的执行结果，当建立好数据库连接好后... 
                           </DIV>
  <UL>
    <LI class="avatar_img"><A href="http://blog.csdn.net/yuanzhangmei1" target="_blank" 
    strategy="BlogCommendFromBaidu_2"><IMG title="yuanzhangmei1" alt="yuanzhangmei1" 
    src=""></A></LI>
    <LI class="user_name"><A 
    href="http://blog.csdn.net/yuanzhangmei1">yuanzhangmei1</A></LI>
    <LI class="time">2012年07月02日 20:30</LI>
    <LI class="visited_num"><I 
    class="icon iconfont icon-read"></I><SPAN>32014</SPAN></LI></UL></DD></DL>
<DL class="clearfix csdn-tracking-statistics" data-mod="popu_387" data-dsm="post" 
data-feed-show="false" data-poputype="feed">
  <DD>
  <H2><A href="http://blog.csdn.net/baidu_33570760/article/details/71740554" 
  target="_blank" 
strategy="BlogCommendFromBaidu_3">qt之QSqlQuery类执行SQL语句</A></H2>
  <DIV class="summary">                              
  转载自：https://wizardforcel.gitbooks.io/qt-beginning/content/28.html 导语 
  SQL即结构化查询语言，是关系数据库的标准语言。前面两...                          </DIV>
  <UL>
    <LI class="avatar_img"><A href="http://blog.csdn.net/baidu_33570760" target="_blank" 
    strategy="BlogCommendFromBaidu_3"><IMG title="baidu_33570760" alt="baidu_33570760" 
    src="QT-use-2db_files/3_baidu_33570760.jpg"></A></LI>
    <LI class="user_name"><A 
    href="http://blog.csdn.net/baidu_33570760">baidu_33570760</A></LI>
    <LI class="time">2017年05月12日 15:41</LI>
    <LI class="visited_num"><I 
    class="icon iconfont icon-read"></I><SPAN>833</SPAN></LI></UL></DD></DL>
<DL class="clearfix csdn-tracking-statistics" data-mod="popu_387" data-dsm="post" 
data-feed-show="false" data-poputype="feed">
  <DD>
  <H2><A href="http://blog.csdn.net/sbisyju/article/details/8925878" target="_blank" 
  strategy="BlogCommendFromBaidu_4">QT中使用QSqlDatabase 时出现的问题。</A></H2>
  <DIV class="summary">1、&nbsp;&nbsp; 
  程序中用一个类封装了一个操作数据库文件的方法，但是我需要在不同的窗口中调用该数据库（多个应用连接数据），如果我在不同窗口中分别定义了该数据库类的变量，运行的过程中会出现以下警告： 
  &nbsp;&nbsp;&nbsp;&nbsp;...                          </DIV>
  <UL>
    <LI class="avatar_img"><A href="http://blog.csdn.net/sbisyju" target="_blank" 
    strategy="BlogCommendFromBaidu_4"><IMG title="sbisyju" alt="sbisyju" 
    src=""></A></LI>
    <LI class="user_name"><A 
href="http://blog.csdn.net/sbisyju">sbisyju</A></LI>
    <LI class="time">2013年05月14日 15:45</LI>
    <LI class="visited_num"><I 
    class="icon iconfont icon-read"></I><SPAN>9296</SPAN></LI></UL></DD></DL><!-- 广告位：PC端-博客详情通栏7（feed流）-808*120 --> 
                  
<SCRIPT>
                      (function() {
                          var s = "_" + Math.random().toString(36).slice(2);
                          document.write('<div id="' + s + '"></div>');
                          (window.slotbydup=window.slotbydup || []).push({
                              id: '4983339',
                              container: s,
                              size: '808,120',
                              display: 'inlay-fix'
                          });
                      })();
                  </SCRIPT>
                                                                               
<DL class="clearfix csdn-tracking-statistics" data-mod="popu_387" data-dsm="post" 
data-feed-show="false" data-poputype="feed">
  <DD>
  <H2><A href="http://blog.csdn.net/leftover_crazy/article/details/5788367" 
  target="_blank" strategy="BlogCommendFromBaidu_5"> QSqlDatabase 
  使用小结，解决部分数据库操作导致程序崩溃的办法</A></H2>
  <DIV class="summary">                              这两天都在为 QSqlDatabase 
  类头疼&nbsp;&nbsp; 因为涉及多个连接&nbsp; 连接到同一个数据库&nbsp;&nbsp;&nbsp;&nbsp; 
  而又没有对各个连接设置名称&nbsp; 网上大部分简易教程都是采用默认数据库连接名称&nbsp;&nbsp; 这样就会导致在对其中...           
                 </DIV>
  <UL>
    <LI class="avatar_img"><A href="http://blog.csdn.net/leftover_crazy" target="_blank" 
    strategy="BlogCommendFromBaidu_5"><IMG title="leftover_crazy" alt="leftover_crazy" 
    src="QT-use-2db_files/3_leftover_crazy.jpg"></A></LI>
    <LI class="user_name"><A 
    href="http://blog.csdn.net/leftover_crazy">leftover_crazy</A></LI>
    <LI class="time">2010年08月04日 16:18</LI>
    <LI class="visited_num"><I 
    class="icon iconfont icon-read"></I><SPAN>5494</SPAN></LI></UL></DD></DL>
<DL class="clearfix csdn-tracking-statistics" data-mod="popu_387" data-dsm="post" 
data-feed-show="false" data-poputype="feed">
  <DD>
  <H2><A href="http://blog.csdn.net/u011512437/article/details/43927403" target="_blank" 
  strategy="BlogCommendFromBaidu_6">QT数据库连接必备QSqlDatabase</A></H2>
  <DIV 
  class="summary">每个应用都需要或多或少的保存一些数据，当不想用文件保存数据时，最好的选择恐怕就是数据库了。数据库拥有管理数据方便，数据可读性高等优点。那么在QT中又怎样使应用与数据库关联呢？！下面来介绍一个QSqlD... 
                           </DIV>
  <UL>
    <LI class="avatar_img"><A href="http://blog.csdn.net/u011512437" target="_blank" 
    strategy="BlogCommendFromBaidu_6"><IMG title="u011512437" alt="u011512437" 
    src=""></A></LI>
    <LI class="user_name"><A 
    href="http://blog.csdn.net/u011512437">u011512437</A></LI>
    <LI class="time">2015年02月24日 22:18</LI>
    <LI class="visited_num"><I 
    class="icon iconfont icon-read"></I><SPAN>1797</SPAN></LI></UL></DD></DL>
<DL class="clearfix csdn-tracking-statistics" data-mod="popu_387" data-dsm="post" 
data-feed-show="false" data-poputype="feed">
  <DD>
  <H2><A href="http://blog.csdn.net/lixingworkCCC/article/details/9999221" 
  target="_blank" strategy="BlogCommendFromBaidu_7">QT如何连接多种数据库</A></H2>
  <DIV class="summary">QT提供了对多种数据库的访问支持，对SQL Server也可以通过ODBC来进行访问。 要想顺利访问SQL 
  Server。 首先要保证以下几点： 1. QT编译时已经编译了QtSql 2. 编译...                          </DIV>
  <UL>
    <LI class="avatar_img"><A href="http://blog.csdn.net/lixingworkCCC" target="_blank" 
    strategy="BlogCommendFromBaidu_7"><IMG title="lixingworkCCC" alt="lixingworkCCC" 
    src=""></A></LI>
    <LI class="user_name"><A 
    href="http://blog.csdn.net/lixingworkCCC">lixingworkCCC</A></LI>
    <LI class="time">2013年08月16日 11:50</LI>
    <LI class="visited_num"><I 
    class="icon iconfont icon-read"></I><SPAN>1621</SPAN></LI></UL></DD></DL>
<DL class="clearfix csdn-tracking-statistics" data-mod="popu_387" data-dsm="post" 
data-feed-show="false" data-poputype="feed">
  <DD>
  <H2><A href="http://blog.csdn.net/alex201030273437/article/details/8193809" 
  target="_blank" strategy="BlogCommendFromBaidu_8">QT 连接数据库的详细步骤</A></H2>
  <DIV class="summary">QT 连接数据库步骤是本文要介绍的内容，不多说先来看内容。连接数据库需要的头文件： 1. #include  2. 
  #include  1、连接微软的Access 1. QSq...                          </DIV>
  <UL>
    <LI class="avatar_img"><A href="http://blog.csdn.net/alex201030273437" 
    target="_blank" strategy="BlogCommendFromBaidu_8"><IMG title="alex201030273437" 
    alt="alex201030273437" 
    src="QT-use-2db_files/3_alex201030273437.jpg"></A></LI>
    <LI class="user_name"><A 
    href="http://blog.csdn.net/alex201030273437">alex201030273437</A></LI>
    <LI class="time">2012年11月17日 14:41</LI>
    <LI class="visited_num"><I 
    class="icon iconfont icon-read"></I><SPAN>1489</SPAN></LI></UL></DD></DL>
<DL class="clearfix csdn-tracking-statistics" data-mod="popu_387" data-dsm="post" 
data-feed-show="false" data-poputype="feed">
  <DD>
  <H2><A href="http://blog.csdn.net/trustguan/article/details/39270865" target="_blank" 
  strategy="BlogCommendFromCF_9">Qt5全局热键-QxtGlobalShortcut</A></H2>
  <DIV 
  class="summary">转载地址：http://www.cnblogs.com/aftertherainofstars/p/3946313.html 
  最近做一个项目需要注册全局热键，在网上搜索发现有个第三方库 lib...                          </DIV>
  <UL>
    <LI class="avatar_img"><A href="http://blog.csdn.net/trustguan" target="_blank" 
    strategy="BlogCommendFromCF_9"><IMG title="trustguan" alt="trustguan" src="QT-use-2db_files/3_trustguan.jpg"></A></LI>
    <LI class="user_name"><A 
    href="http://blog.csdn.net/trustguan">trustguan</A></LI>
    <LI class="time">2014年09月14日 16:49</LI>
    <LI class="visited_num"><I 
    class="icon iconfont icon-read"></I><SPAN>1510</SPAN></LI></UL></DD></DL></DIV></main><ASIDE>
<DIV class="right_box user_info">
<DL class="inf_bar clearfix">
  <DT class="csdn-tracking-statistics" data-mod="popu_381"><A href="http://blog.csdn.net/gongjin21" 
  target="_blank"><IMG class="avatar_pic" src="">               </A>             
    <SPAN title="" class="medals"></SPAN></DT>
  <DD>
  <H3 class="csdn-tracking-statistics" data-mod="popu_380"><A id="uid" href="http://blog.csdn.net/gongjin21" 
  target="_blank">gongjin21</A></H3><SPAN class="csdn-tracking-statistics" 
  data-mod="popu_379"><A class="btn btn-redborder-small " id="span_add_follow" 
  target="_self">＋关注</A></SPAN>           </DD></DL>
<DIV class="inf_number_box clearfix">
<DL>
  <DT>原创</DT>
  <DD>8</DD></DL>
<DL>
  <DT>粉丝</DT>
  <DD id="fan">4</DD></DL>
<DL>
  <DT>喜欢</DT>
  <DD>0</DD></DL>
<DL>
  <DT>码云</DT>
  <DD>&nbsp;</DD></DL></DIV>
<DIV class="writings">
<DIV class="public_signal clearfix">
<H3>他的最新文章</H3><A class="more" href="http://blog.csdn.net/gongjin21" target="_blank"><SPAN>更多文章</SPAN></A> 
        </DIV>
<UL class="inf_list clearfix csdn-tracking-statistics" data-mod="popu_382">
  <LI class="clearfix"><A href="http://blog.csdn.net/gongjin21/article/details/5733307" 
  target="_blank">QT 获取本机所有IP</A>               </LI>
  <LI class="clearfix"><A href="http://blog.csdn.net/gongjin21/article/details/5733306" 
  target="_blank">QString 赋值为 "" 才能查询 name 为空的记录。</A>               </LI>
  <LI class="clearfix"><A href="http://blog.csdn.net/gongjin21/article/details/5733296" 
  target="_blank">QT 连接多个数据库，必须指定不同的连接名字</A>               </LI></UL></DIV></DIV>
<DIV class="extension_other csdn-tracking-statistics" data-mod="popu_389"><!--u3032528--> 
    
<DIV class="flashrecommend">
<SCRIPT src="QT-use-2db_files/bwocoltlyzdec.js" type="text/javascript"></SCRIPT>
     </DIV></DIV><!--    [StartShowSelfColumn]-->     <!--    [EndShowSelfColumn]--> 
    
<DIV class="fixRight">
<DIV class="right_box padb0 csdn-tracking-statistics" data-mod="popu_391">
<H3 class="tit"><SPAN><EM>在线课程</EM></SPAN></H3>
<UL class="edu_li clearfix"><!--            [starteducourses]-->               
                                                
  <LI>
  <DIV><A href="http://blog.csdn.net/gongjin21/article/details/" 
  target="_blank"><IMG title="腾讯云容器服务架构实现介绍" alt="腾讯云容器服务架构实现介绍" src="QT-use-2db_files/201711281713051168.png"> 
                                  </A></DIV>
  <DIV>
  <P><A href="http://blog.csdn.net/gongjin21/article/details/" 
  target="_blank">腾讯云容器服务架构实现介绍</A></P>
  <P>讲师：董晓杰</P></DIV></LI>
  <LI>
  <DIV><A href="http://edu.csdn.net/huiyiCourse/series_detail/73?utm_source=blog7" 
  target="_blank"><IMG title="容器技术在58同城的实践" alt="容器技术在58同城的实践" src="QT-use-2db_files/201711281706431295.png"> 
                                  </A></DIV>
  <DIV>
  <P><A href="http://edu.csdn.net/huiyiCourse/series_detail/73?utm_source=blog7" 
  target="_blank">容器技术在58同城的实践</A></P>
  <P>讲师：姚远</P></DIV></LI><!--            [endeducourses]-->             
</UL></DIV>
<DIV class="extension_other csdn-tracking-statistics bottomRcom" style="position: absolute; z-index: -5; opacity: 0; pointer-events: none;" 
data-mod="popu_389"><!--u3032528-->             
<DIV class="flashrecommend"><!-- 请置于所有广告位代码之前 -->                 
<SCRIPT src="QT-use-2db_files/dm.js"></SCRIPT>
                 <!-- 广告位：PC端-博客详情页右侧视窗1（feed流）-300*250 -->                 
<SCRIPT>
                    (function() {
                        var s = "_" + Math.random().toString(36).slice(2);
                        document.write('<div id="' + s + '"></div>');
                        (window.slotbydup=window.slotbydup || []).push({
                            id: '4770930',
                            container: s,
                            size: '300,250',
                            display: 'inlay-fix'
                        });
                    })();
                </SCRIPT>
             </DIV></DIV></DIV>
<DIV class="user-hotArticle">
<H3>他的热门文章</H3>
<UL class="hotArticle-list csdn-tracking-statistics" data-mod="popu_521"><!--            [StartHotArticles]--> 
                                                  
  <LI><A href="http://blog.csdn.net/gongjin21/article/details/5733296">QT 
  连接多个数据库，必须指定不同的连接名字</A>
  <DIV class="read list-left"><I 
  class="icon iconfont icon-read"></I><SPAN>3934</SPAN></DIV></LI>
  <LI><A href="http://blog.csdn.net/gongjin21/article/details/5719366">动态创建的 
  CEdit 被限制长度，增加 ES_AUTOHSCROLL 属性；被无法Tab激活焦点，增加 WS_TABSTOP 属性</A>
  <DIV class="read list-left"><I 
  class="icon iconfont icon-read"></I><SPAN>1828</SPAN></DIV></LI>
  <LI><A 
  href="http://blog.csdn.net/gongjin21/article/details/5719375">获取网页中的内容(CDHtmlDialog)</A>
  <DIV class="read list-left"><I 
  class="icon iconfont icon-read"></I><SPAN>1362</SPAN></DIV></LI>
  <LI><A href="http://blog.csdn.net/gongjin21/article/details/5733307">QT 
  获取本机所有IP</A>
  <DIV class="read list-left"><I 
  class="icon iconfont icon-read"></I><SPAN>1352</SPAN></DIV></LI>
  <LI><A href="http://blog.csdn.net/gongjin21/article/details/5715274">禁止 Enter 
  或 ESC 键关闭 MFC 窗口</A>
  <DIV class="read list-left"><I 
  class="icon iconfont icon-read"></I><SPAN>1292</SPAN></DIV></LI><!--            [EndHotArticles]--> 
          </UL></DIV><!--    [startcustom]-->     <!--    [endcustom]--> 
</ASIDE></DIV>
<DIV class="left_fixed">
<DIV class="left_show_button"><SPAN><I 
class="icon iconfont icon-youjiantou"></I>         </SPAN>     </DIV>
<UL class="left_menu">
  <LI><BUTTON class="left-fixed-btn btn-like csdn-tracking-statistics" data-mod="popu_373" 
  target="_self"><A class="iconbox border_red" href="javascript:void(0);"><I 
  class="icon iconfont icon-dianzan"></I></A><A class="txt" href="javascript:void(0);">0</A></BUTTON> 
          </LI>
  <LI id="blog_artical_directory"><BUTTON class="left-fixed-btn left_menu_btn csdn-tracking-statistics" 
  data-mod="popu_372" target="_self"><A class="iconbox border_black" href="javascript:void(0);"><I 
  class="icon iconfont icon-mulu"></I></A></BUTTON>         </LI>
  <LI class="menu_con">
  <DIV class="list_father">
  <DIV class="arr_box"><BUTTON class="btn-noborder arr-btn scroll-down  left_scroll_down"><I 
  class="icon iconfont icon-xiajiantou"></I></BUTTON>                     
  <BUTTON class="btn-noborder arr-btn scroll-up left_scroll_top"><I class="icon iconfont icon-shangjiantou"></I></BUTTON> 
                  </DIV>
  <DIV class="arr"></DIV>
  <DIV id="csdnBlogDir"></DIV></DIV></LI><!--        <li>-->         <!--            <button class="left-fixed-btn btn-like tracking-ad" data-mod="popu_373" target="_self">--> 
          <!--                <span class="iconbox border_red"><i class="icon iconfont icon-xihuan-"></i></span>--> 
          <!--                <span class="txt">喜欢</span>-->         <!--                <span class="untxt">取消喜欢</span>--> 
          <!--            </button>-->         <!--        </li>-->         
  <LI><BUTTON class="left-fixed-btn csdn-tracking-statistics" id="com-quick-collect" 
  data-mod="popu_374" target="_self"><A class="iconbox border_purple" href="javascript:void(0);"><I 
  class="icon iconfont icon-shoucang"></I></A></BUTTON>         </LI>
  <LI><BUTTON class="left-fixed-btn btn-pinglun csdn-tracking-statistics" 
  data-mod="popu_544"><A class="iconbox border_purple" href="javascript:void(0);"><I 
  class="icon iconfont icon-pinglun"></I></A></BUTTON>         </LI>
  <LI id="share_box"><BUTTON class="left-fixed-btn  csdn-tracking-statistics" 
  data-mod="popu_375" target="_self"><A class="iconbox border_orange" href="javascript:void(0);"><I 
  class="icon iconfont icon-fenxiang"></I></A></BUTTON>             
  <DIV class="bdsharebuttonbox csdn-tracking-statistics" data-mod="popu_172">
  <DIV class="outside"><SPAN class="iconbox border_red2"><I class="icon iconfont icon-xinlang"></I></SPAN><A 
  title="分享到新浪微博" class="bds_tsina" href="http://blog.csdn.net/gongjin21/article/details/5733296#" 
  data-cmd="tsina"></A>                 </DIV>
  <DIV class="outside"><SPAN class="iconbox border_green"><I class="icon iconfont icon-weixin"></I></SPAN><A 
  title="分享到微信" class="bds_weixin" href="http://blog.csdn.net/gongjin21/article/details/5733296#" 
  data-cmd="weixin"></A>                 </DIV>
  <DIV class="outside"><SPAN class="iconbox border_blue"><I class="icon iconfont icon-QQ"></I></SPAN><A 
  title="分享到QQ空间" class="bds_qzone" href="http://blog.csdn.net/gongjin21/article/details/5733296#" 
  data-cmd="qzone"></A>                 </DIV></DIV></LI></UL></DIV>
<DIV class="right_fixed">
<DIV class="r_ico"><I class="icon iconfont icon-jubao"></I><SPAN class="txt" id="reportBtn">内容举报</SPAN></DIV>
<DIV class="returnTop"><I 
class="icon iconfont icon-fanhuidingbu"></I><SPAN>返回顶部</SPAN></DIV></DIV>
<DIV id="pop_win"></DIV>
<DIV id="popup_mask"></DIV>
<DIV class="pop_CA_cover"></DIV>
<DIV class="pop pop_CA">
<DIV class="CA_header">        收藏助手         <SPAN class="cancel_icon" id="fapancle"></SPAN></DIV><IFRAME 
width="100%" height="360" id="collectIframe" src="QT-use-2db_files/o.htm" 
frameborder="0" scrolling="no"></IFRAME> </DIV><!--举报--> 
<DIV id="report_dialog" style="left: 343.5px; top: 250px;">
<DIV id="panel_report">
<DIV class="panel_head">不良信息举报</DIV>
<FORM class="panel_body" id="frmReport" method="post">
<TABLE class="pop_table" border="0" cellspacing="4" cellpadding="0">
  <TBODY>
  <TR>
    <TD colspan="2">您举报文章：<A href="http://blog.csdn.net/gongjin21/article/details/5733296" 
      target="_blank">QT 连接多个数据库，必须指定不同的连接名字</A></TD></TR>
  <TR>
    <TH style="width: 60px;">举报原因：</TH>
    <TD id="panel_reporttype"><LABEL><INPUT name="report_type" class="report_type" 
      id="report_sex" type="radio" value="1">色情</LABEL>                     
      <LABEL><INPUT name="report_type" class="report_type" id="report_Politics" 
      type="radio" value="2">政治</LABEL>                     <LABEL><INPUT name="report_type" 
      class="report_type" id="report_copy" type="radio" value="3">抄袭</LABEL>     
                      <LABEL><INPUT name="report_type" class="report_type" id="report_ad" 
      type="radio" value="4">广告</LABEL>                     <LABEL><INPUT name="report_type" 
      class="report_type" id="report_want" type="radio" value="5">招聘</LABEL>     
                      <LABEL><INPUT name="report_type" class="report_type" id="report_call" 
      type="radio" value="6">骂人</LABEL>                     <BR><LABEL><INPUT 
      name="report_type" class="report_type" id="report_other" type="radio" 
      value="7">其他</LABEL>                     <INPUT name="report_other_content" id="report_other_content" style="display: none;" type="text" maxlength="30"> 
                      </TD></TR>
  <TR id="panel_originalurl" style="display: none;">
    <TH>原文地址：</TH>
    <TD><INPUT name="originalurl" id="originalurl" style="width: 90%;" type="text" value="http://"> 
                      </TD></TR>
  <TR>
    <TH id="sp_reason">原因补充：</TH>
    <TD><TEXTAREA name="report_description" id="report_description" style="width: 300px;" rows="3"></TEXTAREA> 
                          
      <P id="sp_n" 
      style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);">(最多只允许输入30个字)</P></TD></TR>
  <TR>
    <TD></TD>
    <TD><INPUT name="submit" align="middle" class="btn_1" id="btnSubmitReport" 
      type="image" src="QT-use-2db_files/btn_submit.jpg">                     
      <SPAN style="padding-left: 20px;"></SPAN>                     <IMG align="middle" 
      id="btnCloseReportDialog" src="QT-use-2db_files/btn_cancel.jpg">           
                
      <DIV id="error" 
style="color: red;"></DIV></TD></TR></TBODY></TABLE></FORM></DIV>
<SCRIPT language="javascript" type="text/javascript">
        var isComment=0;
        //显示隐藏地址
        $(function () {
          console.log("version:phoenix");
            if(isComment){
                $("#report_description").attr("disabled",true);
                $("#sp_n").hide();
                $("#sp_reason").html("评论内容：");
            }
            $(".report_type").click(function () {
                $("#panel_originalurl,#report_other_content").hide();
                switch ($(this).val()) {
                    case '3':
                        $("#panel_originalurl").show();
                        $("#originalurl").focus();
                        break;
                    case '7':
                        if(isComment){
                            $("#report_other_content").show().focus();
                        }
                        break;
                }

            });

            $("#frmReport").submit(function () {
                if (!currentUserName) {

                    if (confirm("您的操作必须登录，是否登录？")) {
                        location.href = "http://passport.csdn.net/account/login?from=" + encodeURIComponent(location.href);
                        return false;
                    }
                    return false;
                }

                var reportType = $("input[name=report_type]:checked").val();
                if(!reportType){
                    alert("请选择举报原因！");
                    return false;
                }
                var otherInfo = "";
                switch (reportType) {
                    case '3':
                        otherInfo = $("#originalurl").val();
                        if (otherInfo == ""||otherInfo=="http://") {
                            alert("举报抄袭必须提供原创文章地址！");
                            $("#originalurl").focus();
                            return false;
                        } else if(!checkeURL(otherInfo)) {
                            alert("请输入正确的原创文章地址！");
                            $("#originalurl").focus();
                            return false;
                        }
                        break;
                    case '7':
                        otherInfo = $("#report_other_content").val();
                        if (isComment && !otherInfo) {
                            alert("请填写举报的具体原因！");
                            $("#report_other_content").focus();
                            return false;
                        }
                        if(!isComment){
                            if(!$("#report_description").val()){
                                alert("请填写举报的具体原因！");
                                $("#report_description").focus();
                                return false;
                            }
                        }
                        break;
                }
                if(!isComment){
                    if($("#report_description").val().length>30){
                        alert("举报原因最多只允许输入30个字！");
                        return false;
                    }
                }
	            nowTime = {
		            year: new Date().getFullYear(),
		            month: parseInt(new Date().getMonth())+1,
		            day: new Date().getDate(),
		            hours: parseInt(new Date().getHours())+1,
		            minutes: parseInt(new Date().getMinutes())+1,
		            seconds: parseInt(new Date().getSeconds())+1
	            };
	            var data = {
		            articleId: fileName,
		            commentId: 0,
		            reportType: reportType,
		            originalurl: $("#originalurl").val(),
		            report_other_content: $("#report_other_content").val(),
		            report_description: $("#report_description").val(),
		            currentUserName: currentUserName,
		            updatetime: nowTime.year+'/'+nowTime.month+'/'+nowTime.day+' '+ nowTime.hours+':'+nowTime.minutes+':'+seconds,
		            blogUser: username
	            };
	            if(!isComment){//如果是举报文章
		            data.report_other_content = data.report_description;
		            // data.report_description = "1. 神经网络这是一个常见的神经网络的图：这是一个常见的三层神经网络的基本构成，Layer L1是输入层，Layer L2是隐含层";
	            }

	            $.post(blog_address + "/common/report?id="+fileName+"&t=2", data, function (data) {
		            if (data.result == 1){
			            SetError("感谢您的举报，我们会尽快审核！");
		            }else{
			            if (data.content) alert(data.content);
		            }

	            });
                return false;
            });

            $("#btnCloseReportDialog").click(function () {
                CloseDiv();
            });

        });

        //提示后关闭方法
        function SetError(error) {
            $("#btnCloseReportDialog").trigger("click");
            alert(error);
            CloseDiv();
        }

        //关闭方法
        function CloseDiv() {

            $.removeMask();
            $("#report_dialog").hide();
            return false;
        }

        //验证url
        function checkeURL(url){
            return /^http(s)?:\/\/([\w-]+\.)+[\w-]+/i.test(url);
        }
    </SCRIPT>
 </DIV><!--  fixme 后期清理掉  --> 
<DIV id="a52b5334d" style="width: 1px; height: 1px; display: none;">
<SCRIPT id="adJs52b5334"></SCRIPT>
     
<SCRIPT>document.getElementById("adJs52b5334").src = "http://ads.csdn.net/js/opt/52b5334.js?t=" + Math.random();</SCRIPT>
 </DIV>
<SCRIPT src="QT-use-2db_files/bootstrap.min.js" type="text/javascript"></SCRIPT>
 
<SCRIPT src="QT-use-2db_files/MathJax.js" type="text/javascript"></SCRIPT>
 
<SCRIPT src="QT-use-2db_files/login.js" type="text/javascript"></SCRIPT>
 
<SCRIPT>window._bd_share_config = { "common": { "bdSnsKey": {}, "bdText": "", "bdMini": "1", "bdMiniList": false, "bdPic": "", "bdStyle": "0", "bdSize": "16" }, "share": {} }; with (document) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=' + ~(-new Date() / 36e5)];</SCRIPT>
 
<SCRIPT type="text/javascript">
    if($(".article_collect li").length==1){$(".article_collect").hide();}
    if($(".article_tags li").length==1){$(".article_tags").hide();}
    $(".edit a").attr("href","http://write.blog.csdn.net/postedit/"+fileName);
    $.each($(".edu_li a"),function(){$(this).attr("href",$(this).attr("href").replace("blog7","blog9"))});
    new CNick('#uid').showNickname();

    if($("#fan").html()=="")
    {
	    $("#fan").html(0);
    }
</SCRIPT>
 
<SCRIPT src="QT-use-2db_files/appendMark.min.js" type="text/javascript"></SCRIPT>
 
<SCRIPT type="text/javascript">
    appendMark($('.recommend_list').children('a').find('dt'),$('.extension_other'))
</SCRIPT>
 </BODY></HTML>
